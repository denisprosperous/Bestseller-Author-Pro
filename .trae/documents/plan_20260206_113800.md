I will fix the issues by implementing the missing API route and correcting the form submission method. This will ensure that:
1.  **Environment Variables Work**: The new API route will check server-side environment variables (like `OPENAI_API_KEY` in `.env`) and return them to authenticated users if no personal key is found in the database. This allows global users to use the app with the host's configuration.
2.  **Brainstorming Works**: Switching to `useSubmit` will correctly route the form submission through the client-side application logic, bypassing the server's 405 Method Not Allowed error.
3.  **API Key Fetching Works**: The `Error fetching API keys` will be resolved because the endpoint `/api/keys/secure` will now exist and return valid JSON.

### Plan Steps
1.  **Update `app/routes/brainstorm.tsx`**:
    *   Import `useSubmit` from `react-router`.
    *   Update `handleSubmit` to use `submit(formData, { method: "post" })` instead of `form.submit()`.

2.  **Register New API Route**:
    *   Modify `app/routes.ts` to add the route `api/keys/secure` pointing to `routes/api/keys-secure.ts`.

3.  **Implement `app/routes/api/keys-secure.ts`**:
    *   Create this file with `loader` (GET) and `action` (POST) handlers.
    *   **GET**:
        *   Check Supabase for user's stored keys.
        *   If missing, check server-side `process.env` for keys (e.g., `OPENAI_API_KEY`).
        *   Return the keys (decrypted if from DB) to the client so the AI Service can use them.
    *   **POST**:
        *   Handle `save`, `delete`, and `get` actions interacting with Supabase and the encryption utility.
